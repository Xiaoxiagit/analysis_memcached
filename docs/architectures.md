# 系统架构

在剖析memcached源代码之前，需要了解整个系统的模型。后续的章节根据memcached的架构进行介绍，对每层的设计以及源代码都会有详细的文档与之对应。您可以记录下memcached的架构图，从而方便后续源代码解读。

## 1. 整体系统架构

memcached的架构按层进行划分，主要分为以下几层:

1. 网络层
2. 命令解析层
3. 对外存储接口层
4. 内存存储层
5. 外存存储层

![系统架构图](/images/memcached架构图.png)

## 2. 重点知识点

对于每层都有相应的知识需要注意，您可根据这些知识点的来检查您对memcached原理的理解。

### 2.1 网络层

主要知识点:

1. memcached的网络模型
2. 网络子线程的状态机
3. 网络连接的生命周期

### 2.2 命令解析层

主要知识点:

1. 命令解析流程

### 2.3 内存存储层

主要知识点:

1. 内存管理结构
2. Hash链表管理及Hash桶扩展线程
3. LRU链表及其管理
4. 内存维护线程及内存重新分配线程

### 2.4 外存管理层

主要知识点:

1. 外存管理结构
2. 外存写出及紧缩线程
3. 外存与命令的关系
