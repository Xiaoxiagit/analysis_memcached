# 前言

## 1. memcached

### 1.1 memcached是什么

memcached是一个高性能的分布式内存对象缓存系统。其最初的设计是为了减轻数据库负载来加速动态Web应用程序。您可以将其视为应用程序的高速存储系统。其基于内存的管理方式提高了应用程序的响应效率，也决定了只能存储临时数据的特性。

?>有关memcached的详细信息，请参阅[memcached官网](https://memcached.org/)

### 1.2 memcached与Redis

Redis是基于内存的数据存储系统，可用于内存数据库、缓存和消息代理。它支持多种数据结构，支持AOF和主从分布等特点。

memcached与Redis都是基于内存的KV存储系统，都可作为内存缓存系统。

二者的优劣对比如下图所示:

| 特性 | memcached | Redis |
| :--- | :------ | :----- |
| 网络IO | 基于Libevent | 自实现 |
| 网络IO线程数 |  多线程 | 单线程 |
| 持久存储 | 不支持  | 支持 |
| 存储数据类型 | 字符串 | 多种数据类型 |
| 分布式 | 客户端分布式 | master-slave |
| 存储数据大小 | 小于1MB | 小于512MB |
| CPU核数 | 多核  | 单核 |
| 宕机恢复 | 不支持 | 支持 |
| 性能对比 | 更高 | 高 |

一般情况下，memcached和Redis的性能都能够满足业务系统的需求。但Redis提供更多的数据类型以及其主从分布的设计，为其在业界赢得更多的倾爱。相信读者也在业务中经常使用Redis来做高速存储。

相对于Redis提供较多的功能来说，memcached提供单一、有限的内存存储功能，因此memcached的源代码更容易体现高速缓存的设计原理。通过对其源代码进行全面剖析，使读者在高速缓存原理及设计方面有深入了解。

?>有关Redis的详细消息，请参阅[Redis官网介绍](https://redis.io/topics/introduction)

## 2. 关于本文档

本文档基于memcached的最近源代码进行剖析，根据memcached架构图来详细介绍memcached的各个部分以及其对应的源代码。通过本文档，您将理解memcached整体架构、Reactor网络模型、零拷贝实现数据传输以及其LRU管理等等设计。相信您在读完全部文档后，会在高速缓存设计方面有更深理解，能力有所增长。

鉴于作者能力有限，难免在文档中存在错别字、难以理解等问题。希望您在阅读时提交[Issues](https://github.com/whynotAC/analysis_memcached/issues)指出错误部分，帮助文档改进。

?>本文档针对于想了解memcached设计原理的读者。

## 3. 对读者要求

由于memcached使用C语言编写，并且涉及较多的数据结构模型。因此读者需要具备以下几个条件:

1. 开发过一定项目。
2. 简单的C语言阅读能力。
3. 理解基础的数据结构。
